ğŸ” Authentication API
ğŸ”¸ Register

POST /api/v1/auth/register

Body:
{
  "name": "Ahmed",
  "email": "ahmed@example.com",
  "password": "123456"
}

Response:
{
  "status": "success",
  "token": "jwt_token_here",
  "user": { "id": "...", "name": "Ahmed", "email": "ahmed@example.com" }
}

ğŸ”¸ Signin

POST /api/v1/auth/signin

Body:
{
  "email": "ahmed@example.com",
  "password": "123456"
}

Response:
{
  "status": "success",
  "token": "jwt_token_here",
  "user": { "id": "...", "name": "Ahmed" }
}

ğŸ¥ Movies API
ğŸ”¸ Add a Movie (Admin Only)

POST /api/v1/movies/
Headers: Authorization: Bearer <token>
Form Data:

title: Inception
description: A mind-bending thriller
price: 150
moviePoster: [upload image]

Response:
{
  "status": "success",
  "movie": {
    "id": "...",
    "title": "Inception",
    "poster": "/moviePosters/17396580350.jpg"
  }
}

ğŸ”¸ Get All Movies

GET /api/v1/movies/

Response:
{
  "status": "success",
  "results": 2,
  "data": [
    { "title": "Inception", "price": 150 },
    { "title": "Oppenheimer", "price": 180 }
  ]
}

ğŸ”¸ Get Movie by ID

GET /api/v1/movies/:id

ğŸ”¸ Update Movie (Admin Only)

PATCH /api/v1/movies/:id
Headers: Authorization: Bearer <token>
Form Data:

title: New Title
moviePoster: [optional image]

ğŸ”¸ Delete Movie (Admin Only)

DELETE /api/v1/movies/:id
Headers: Authorization: Bearer <token>

ğŸ‘¤ Users API
ğŸ”¸ Get Current User

GET /api/v1/users/me
Headers: Authorization: Bearer <token>

Response:
{
  "status": "success",
  "user": {
    "name": "Ahmed",
    "email": "ahmed@example.com"
  }
}

ğŸŸï¸ Booking API
ğŸ”¸ Create Checkout Session (Stripe)

POST /api/v1/bookings/create-checkout-session
Headers: Authorization: Bearer <token>
Body:

{
  "movieId": "670d96e5e7d9b3d4ccf25d21",
  "quantity": 2
}

Response:
{
  "status": "success",
  "session": {
    "id": "cs_test_a1B2C3D4",
    "url": "https://checkout.stripe.com/pay/cs_test_a1B2C3D4"
  }
}


ğŸ’° Note: Stripe payments use EGP (Egyptian Pound).

ğŸ”¸ Stripe Webhook

POST /api/v1/bookings/webhook
Used by Stripe to confirm successful payments.
â¡ï¸ You donâ€™t call this manually â€” Stripe calls it automatically.

ğŸ”¸ Get My Bookings

GET /api/v1/bookings/my-bookings
Headers: Authorization: Bearer <token>

Response:
{
  "status": "success",
  "bookings": [
    {
      "movieTitle": "Inception",
      "tickets": 2,
      "price": 300
    }
  ]
}